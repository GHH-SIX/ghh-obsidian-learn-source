`g` 在 Vim 中是一个强大的 **“前缀指令”**，单独按它不会有任何效果，但后面接一个字符就能触发各种高级操作。可以把它理解为 Vim 中的一个 **“功能切换键”**。

下面是 `g` 指令的完整用法分类整理，从最常用到较冷门：

## 📋 g 指令速查表

| 按键           | 模式   | 功能描述                          |
| :----------- | :--- | :---------------------------- |
| **==`gg`==** | 普通模式 | **跳到文件第一行**（最常用）              |
| ==**`G`**==  | 普通模式 | **跳到文件最后一行**（最常用）             |
| **`gf`**     | 普通模式 | **打开光标下的文件路径**（Go to File）    |
| **`gd`**     | 普通模式 | **跳转到局部定义**（Go to Definition） |
| **`gD`**     | 普通模式 | **跳转到全局定义**                   |
| **`*`**      | 普通模式 | **向下搜索当前光标单词**（向前搜索）          |
| **`#`**      | 普通模式 | **向上搜索当前光标单词**（向后搜索）          |
| **`~`**      | 普通模式 | **切换光标下字符的大小写**               |
| **`~`**      | 可视模式 | **切换选中文本的大小写**                |
| **`gu`**     | 可视模式 | **将选中文本转为小写**（go lower）       |
| **`gU`**     | 可视模式 | **将选中文本转为大写**（go UPPER）       |
| **`q`**      | 普通模式 | **开始录制宏**（按 `q` 后接寄存器名）       |
| **`v`**      | 普通模式 | **进入面向字符的可视模式**               |
| **`V`**      | 普通模式 | **进入面向行的可视模式**                |
| **`Ctrl+G`** | 普通模式 | **显示当前文件信息和光标位置**             |
| **`Ctrl+G`** | 插入模式 | **临时进入普通模式执行单命令**             |
| **==`gh`==** | 普通模式 | 显示代码类型提示                      |

## 🔍 导航与跳转类

### 文件内跳转
- **==`gg`==**：跳转到**文件第一行**（相当于 `:1`）
- **==`G`==**（大写）：跳转到**文件最后一行**（相当于 `:$`）
- **==`g;`==**：跳转到**上一次修改的位置**
- **==`g,`==**：跳转到**下一次修改的位置**
- **==`gi`==**：跳转到**最后一次插入的位置**并进入插入模式

### 行内精确跳转
- **`g0`** = `0`：跳转到当前屏幕行的第一个字符
- **==`g^`==**：跳转到当前屏幕行的第一个非空白字符
- **`g$`** = `$`：跳转到当前屏幕行的最后一个字符
- **==`gm`==**：跳转到当前屏幕行的中间位置

### 搜索与跳转
- **==`*`==**：向前（向下）搜索当前光标下的**完整单词**
- **==`#`==**：向后（向上）搜索当前光标下的**完整单词**
- **==`gd`==**：跳转到**局部定义**（Local Declaration，在函数/变量作用域内）
- **==`gD`==**：跳转到**全局定义**（Global Declaration）

## ✏️ 文本操作类

### 大小写转换
- **==`~`==**：切换**光标下字符**的大小写（普通模式）
- **`gu{motion}`**：将指定范围的文本转为**小写**
  - ==`guu`==：将**整行**转为小写
  - ==`guw`==：将**当前单词**转为小写
  - ==`guip`==：将**当前段落**转为小写
- **`gU{motion}`**：将指定范围的文本转为**大写**
  - ==`gUU`==：将**整行**转为大写
  - ==`gUw`==：将**当前单词**转为大写
  - ==`gUap`==：将**当前段落（包括前后空行）**转为大写
- **`g~{motion}`**：切换指定范围文本的大小写

### 格式化与排版
- **`gq{motion}`**：对指定范围的文本进行**格式化（自动换行）**
  - `gqip`：格式化当前段落
  - `gqap`：格式化当前段落（包括前后空行）
- ~~**`gw{motion}`**：格式化文本但**保持光标位置不变**~~
- **==`gJ`==**：将当前行和下一行**合并（不留空格）**
  - 对比普通 `J`：合并后留一个空格

## 📚 标记与寄存器

### ==标记操作==
- **`'`**（单引号）：跳转到标记所在行的**行首**
  - `'a`：跳转到标记 `a`
- **```**（反引号）：跳转到标记的**精确位置**
  - `` `a``：精确跳转到标记 `a` 的位置
- **`m{a-z}`**：在当前光标位置**设置标记**
  - `ma`：设置标记 `a`

### ==寄存器与宏==
- **`q{register}`**：开始录制宏到指定寄存器
  - `qa`：开始录制宏到寄存器 `a`
  - 再次按 `q` 停止录制
- **`@{register}`**：执行寄存器中的宏
  - `@a`：执行寄存器 `a` 中的宏
- **`@@`**：重复执行**上一次执行的宏**

## 🖱️ 可视模式相关

### 模式切换
- **`v`**：进入**字符可视模式**（Visual Mode）
- **`V`**（大写）：进入**行可视模式**（Visual Line Mode）
- **`Ctrl+V`** 或 **`Ctrl+Q`**：进入**块可视模式**（Visual Block Mode）

### 可视模式操作
- 在可视模式中，`g` 同样支持：
  - `gu`：将选中文本转为小写
  - `gU`：将选中文本转为大写
  - `g~`：切换选中文本的大小写

## 🔗 文件与外部操作

### 文件操作
- **`gf`**：打开光标下的文件路径（Go to File）
  - 如果路径是相对路径，会相对于当前文件打开
- **`gx`**：在浏览器中打开光标下的 URL（需要网络支持）

### 差异比较（Diff）
- **`[c`**：跳转到上一个差异点（change）
- **`]c`**：跳转到下一个差异点
- **`do`** 或 **`:diffget`**：从另一文件获取差异（diff obtain）
- **`dp`** 或 **`:diffput`**：将差异放到另一文件（diff put）

## 💡 VS Code Vim 扩展的特殊情况

在 VS Code 中使用 Vim 扩展时，部分 `g` 指令的行为可能与原生 Vim 略有不同：

1.  **`gd` / `gD`**：会调用 VS Code 的 **"跳转到定义"** 功能
2.  **`gf`**：会调用 VS Code 的 **"打开文件"** 功能
3.  **`*` 和 `#`**：搜索功能由 VS Code 的搜索面板接管
4.  **不支持或行为不同的指令**：
    - `gx`（打开URL）可能无效
    - 某些复杂标记操作可能受限
    - 格式化相关命令（`gq`）可能被 VS Code 的格式化覆盖

### 记忆技巧
- **`g` + 小写字母**：通常是对文本内容进行操作（如 `gu` 转小写）
- **`g` + 大写字母**：通常是更强的操作（如 `gU` 转大写）
- **`gg` / `G`**：最常用的文件首尾跳转（像滚动条拉到顶/底）
- **`g` + 方向键**：屏幕行导航（`g0`, `g$`）

## 练习建议
从最常用的开始，每天练习几个：
1.  先用熟 `gg` 和 `G` 快速跳转
2.  掌握 `guw` 和 `gUw` 处理大小写
3.  尝试用 `gd` 在代码中跳转定义
4.  用 `gf` 快速打开引用的文件

哪个类别的指令你使用最多？或者想深入了解某个特定指令在 VS Code 中的具体行为？